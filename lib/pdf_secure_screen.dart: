// TODO Implement this library.
import 'package:flutter/material.dart';
import 'package:syncfusion_flutter_pdf/pdf.dart';
import 'package:path_provider/path_provider.dart';
import 'package:open_file/open_file.dart';
import 'dart:io';

class SecurePDFScreen extends StatelessWidget {
  Future<void> _securePdf(BuildContext context) async {
    final bytes = await File('assets/example.pdf').readAsBytes();
    final document = PdfDocument(inputBytes: bytes);
    document.security.userPassword = 'SecretPassword123';
    final encryptedBytes = document.save();
    document.dispose();

    final dir = await getApplicationDocumentsDirectory();
    final file = File('${dir.path}/secured.pdf');
    await file.writeAsBytes(encryptedBytes);

    showDialog(
      context: context,
      builder: (_) => AlertDialog(
        title: Text('PDF secured!'),
        content: Text('PDF is encrypted and stored safely.'),
        actions: [TextButton(onPressed: () => Navigator.pop(context), child: Text('OK'))],
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('Secure PDF')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => _securePdf(context),
          child: Text('Encrypt & Hide PDF'),
        ),
      ),
    );
  }
}
